<div class="container-fluid">

    <!-- Page Heading -->
    <h1 class="h3 mb-2 text-gray-800">Users</h1>
    <p class="mb-4">DataTables is a third party plugin that is used to generate the demo table below.
        For more information about DataTables, please visit the <a target="_blank"
            href="https://datatables.net">official DataTables documentation</a>.</p>

    <!-- DataTales Example -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">DataTables Example</h6>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                    <thead>
                        <tr>
                            <th>Email</th>
                            <th>Address</th>
                            <th>Role</th>
                            <th>Status</th>
                            <th>Created At</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let user of users">
                            <td>{{user.email}}</td>
                            <td>{{user.address}}</td>
                            <td>{{renderRole(user.roles)}}</td>
                            <td>{{user.status}}</td>
                            <td>{{user.createdAt}}</td>
                            <td>
                                <button class="btn btn-primary" (click)="editUser(user._id, user)">Edit</button>
                                <button class="btn btn-danger" (click)="deleteUser(user)">Delete</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- User Details Dialog -->
    <p-dialog header="User Details" [(visible)]="userDialogVisible" [style]="{ width: '50vw' }"
        (onHide)="resetSelectedUser()">
        <div *ngIf="selectedUser">
            <div class="form-group">
                <label for="userEmail">Email:</label>
                <input type="text" id="userEmail" class="form-control" [(ngModel)]="selectedUser.email" disabled>
            </div>

            <div class="form-group">
                <label for="userAddress">Address:</label>
                <textarea id="userAddress" class="form-control" [(ngModel)]="selectedUser.address"></textarea>
            </div>

            <div class="form-group">
                <label for="userRoles">Role:</label>
                <select id="userRoles" class="form-control" [(ngModel)]="selectedUser.roles">
                    <option *ngFor="let role of roles" [value]="role">{{role}}</option>
                </select>
            </div>

            <div class="form-group">
                <label for="userStatus">Status:</label>
                <select id="userStatus" class="form-control" [(ngModel)]="selectedUser.status">
                    <option *ngFor="let status of statuses" [value]="status">{{status}}</option>
                </select>
            </div>

            <div class="form-group">
                <label for="userCreatedAt">Created At:</label>
                <input type="text" id="userCreatedAt" class="form-control" [(ngModel)]="selectedUser.createdAt"
                    disabled>
            </div>

            <div class="text-right">
                <button class="btn btn-primary" (click)="updateUser()">Update</button>
                <button class="btn btn-secondary" (click)="resetSelectedUser()">Close</button>
            </div>
        </div>
    </p-dialog>

</div>